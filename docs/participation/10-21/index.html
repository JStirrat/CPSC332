<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        fieldset {
            padding: 10px;
            margin: 10px;
            border: 10px groove green;
            background-color: green;
        }

        form {
            padding: 10px;
            margin: 10px;
            justify-content: center;
            background-color: rgb(119, 163, 113);
        }

        label {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: larger;
        }

        button {
            color: black;
            background-color: greenyellow;
            border: 3px solid rgb(51, 51, 51);
        }

        input {
            color: black;
            background-color: lightgreen;
        }

        .saved {
            border: yellow;
            color: yellow;
        }

        .hide {
            display: none;
        }

        span {
            color: red;
        }
    </style>
    <script>
        window.addEventListener("DOMContentLoaded", domLoaded);

        function domLoaded() {
            let q1Widget = document.getElementById("q1");
            let q2Widget = document.getElementById("q2");
            let q3Widget = document.getElementById("q3");

            document.getElementById("q1-btn").addEventListener("click", () => {
                if (q1Widget.value != "") {
                    sessionStorage.setItem("name", q1Widget.value);
                    q1Widget.classList.add("saved")
                }
                else {
                    document.getElementById("e1").classList.remove("hide");
                }
            });

            q1Widget.addEventListener("focus", () => {
                document.getElementById("e1").classList.add("hide");
            })

            document.getElementById("q2-btn").addEventListener("click", () => {
                if (q2Widget.value != "") {
                    sessionStorage.setItem("color", q2Widget.value);
                    q2Widget.classList.add("saved")
                }
                else {
                    document.getElementById("e2").classList.remove("hide");
                }
            });

            q2Widget.addEventListener("focus", () => {
                document.getElementById("e2").classList.add("hide");
            })

            document.getElementById("q3-btn").addEventListener("click", () => {
                if (q3Widget.value != "") {
                    sessionStorage.setItem("movie", q3Widget.value);
                    q3Widget.classList.add("saved")
                }
                else {
                    document.getElementById("e3").classList.remove("hide");
                }
            });

            q3Widget.addEventListener("focus", () => {
                document.getElementById("e3").classList.add("hide");
            })

            document.getElementById("saveBtn").addEventListener("click", function () {
                if(!sessionStorage.getItem("name") || !sessionStorage.getItem("color") || !sessionStorage.getItem("movie")){
                    event.preventDefault()
                }
            });
        }
    </script>
</head>

<body>
    <label for="fieldset">CPSC 332 10/21 Participation</label>
    <fieldset id="fieldset" name="fieldset">
        <form action="submission.html" method="POST">
            <div>
                <label for="q1">Name: </label>
                <input id="q1" name="q1" type="box">
                <button type="button" id="q1-btn">Save</button>
                <span id="e1" class="hide">Error: empty field</span>
            </div>
            <div>
                <label for="q2">Favorite Color: </label>
                <input id="q2" name="q2" type="box">
                <button type="button" id="q2-btn">Save</button>
                <span id="e2" class="hide">Error: empty field</span>
            </div>
            <div>
                <label for="q3">Favorite Movie: </label>
                <input id="q3" name="q3" type="box">
                <button type="button" id="q3-btn">Save</button>
                <span id="e3" class="hide">Error: empty field</span>
            </div>
            <div>
                <input id="saveBtn" type="submit" value="Submit Response">
            </div>
        </form>
    </fieldset>
    <footer>
        <a href="../../">Back to the index</a>
    </footer>
</body>

</html>